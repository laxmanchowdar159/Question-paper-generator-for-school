/* ── ExamCraft v3 — DM Sans redesign ─────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --accent:      #14b8a6;
  --accent-2:    #2dd4bf;
  --accent-3:    #5eead4;
  --accent-glow: rgba(20,184,166,.38);
  --accent-dim:  rgba(20,184,166,.12);

  /* dark defaults */
  --bg:       #0d1117;
  --surface:  rgba(255,255,255,.04);
  --surface-2:rgba(255,255,255,.07);
  --border:   rgba(255,255,255,.08);
  --border-2: rgba(255,255,255,.14);
  --text:     #e2e8f0;
  --text-2:   #94a3b8;
  --text-3:   #64748b;
  --orb-a:    #134e4a;
  --orb-b:    #1e3a5f;

  --radius:    12px;
  --radius-sm:  8px;
  --radius-lg: 18px;
  --trans: .22s cubic-bezier(.4,0,.2,1);
}

[data-theme="light"] {
  --bg:       #f4f6f9;
  --surface:  rgba(255,255,255,.85);
  --surface-2:rgba(255,255,255,.95);
  --border:   rgba(0,0,0,.08);
  --border-2: rgba(0,0,0,.14);
  --text:     #1e293b;
  --text-2:   #475569;
  --text-3:   #94a3b8;
  --orb-a:    rgba(20,184,166,.18);
  --orb-b:    rgba(2,132,199,.14);
}

html { scroll-behavior: smooth; }
body {
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  line-height: 1.55;
  color: var(--text);
  background: var(--bg);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ── Background ── */
.bg-layer { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
.bg-mesh {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 20% 10%, var(--orb-a), transparent 60%),
    radial-gradient(ellipse 60% 50% at 80% 80%, var(--orb-b), transparent 55%);
  transition: background var(--trans);
}
.bg-grain {
  position: absolute; inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");
  opacity: .5;
}
.bg-orb {
  position: absolute; border-radius: 50%;
  filter: blur(80px); opacity: .35;
  animation: drift 18s ease-in-out infinite;
}
.orb-a { width: 600px; height: 600px; top: -200px; left: -100px; background: var(--orb-a); }
.orb-b { width: 500px; height: 500px; bottom: -150px; right: -100px; background: var(--orb-b); animation-delay: -9s; }
@keyframes drift { 0%,100%{transform:translate(0,0) scale(1)} 50%{transform:translate(40px,25px) scale(1.08)} }

/* ── Nav ── */
.nav { position: sticky; top: 0; z-index: 100; background: rgba(13,17,23,.75); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); }
[data-theme="light"] .nav { background: rgba(244,246,249,.82); }
.nav-inner { display: flex; align-items: center; gap: 16px; height: 52px; padding: 0 20px; max-width: 1400px; margin: 0 auto; }
.nav-brand { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
.brand-mark { display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 8px; background: var(--accent-dim); color: var(--accent); border: 1px solid var(--accent-dim); }
.brand-name { font-size: 15px; font-weight: 700; letter-spacing: -.3px; }
.brand-ai { font-size: 9px; font-weight: 700; letter-spacing: 1px; color: var(--accent); background: var(--accent-dim); border: 1px solid rgba(20,184,166,.25); border-radius: 4px; padding: 1px 5px; text-transform: uppercase; }
.nav-pills { display: flex; gap: 6px; flex: 1; justify-content: center; }
.nav-pill { font-size: 11px; color: var(--text-3); background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 3px 10px; white-space: nowrap; }
.nav-actions { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
.btn-icon { display: inline-flex; align-items: center; gap: 5px; padding: 5px 10px; border-radius: var(--radius-sm); background: var(--surface); border: 1px solid var(--border); color: var(--text-2); font-size: 12px; font-family: inherit; cursor: pointer; transition: all var(--trans); }
.btn-icon:hover { background: var(--surface-2); color: var(--text); border-color: var(--border-2); }
.btn-icon-sm { padding: 6px; }
.icon-sun { display: block; }
.icon-moon { display: none; }
[data-theme="light"] .icon-sun { display: none; }
[data-theme="light"] .icon-moon { display: block; }

/* ── Shell ── */
.shell { position: relative; z-index: 1; display: flex; min-height: calc(100vh - 52px); max-width: 1400px; margin: 0 auto; }

/* ── Sidebar ── */
.sidebar { width: 270px; flex-shrink: 0; padding: 18px 16px 24px; display: flex; flex-direction: column; gap: 12px; position: sticky; top: 52px; height: calc(100vh - 52px); overflow-y: auto; }
.sidebar::-webkit-scrollbar { width: 4px; }
.sidebar::-webkit-scrollbar-track { background: transparent; }
.sidebar::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

.side-hero { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 18px; }
.side-live { display: flex; align-items: center; gap: 7px; margin-bottom: 12px; font-size: 11px; color: var(--text-3); }
.pulse-ring, .pulse-dot { display: inline-block; border-radius: 50%; }
.pulse-dot { width: 6px; height: 6px; background: var(--accent); position: relative; }
.pulse-ring { width: 14px; height: 14px; border: 1.5px solid var(--accent); animation: pulse-ring 2s ease-out infinite; opacity: .6; position: absolute; margin-left: -14px; margin-top: -4px; }
@keyframes pulse-ring { 0%{transform:scale(.5);opacity:.8} 100%{transform:scale(1.5);opacity:0} }
.side-live { position: relative; }
.side-live > span:first-child { position: relative; display: inline-flex; align-items: center; justify-content: center; width: 14px; height: 14px; flex-shrink: 0; }
.side-live > span:first-child::before { content: ''; position: absolute; inset: 0; border-radius: 50%; border: 1.5px solid var(--accent); animation: pulse-ring 2s ease-out infinite; }
.side-live > span:first-child::after { content: ''; width: 6px; height: 6px; border-radius: 50%; background: var(--accent); }
.side-h { font-size: 22px; font-weight: 700; letter-spacing: -.5px; line-height: 1.2; margin-bottom: 8px; }
.side-h em { font-style: italic; color: var(--accent-2); }
.side-p { font-size: 12px; color: var(--text-2); line-height: 1.5; margin-bottom: 14px; }
.side-p em { color: var(--accent-2); font-style: normal; }
.side-stats { display: flex; align-items: center; gap: 8px; }
.s-stat { display: flex; flex-direction: column; flex: 1; }
.s-n { font-size: 13px; font-weight: 700; color: var(--text); }
.s-l { font-size: 10px; color: var(--text-3); }
.s-div { width: 1px; height: 28px; background: var(--border); flex-shrink: 0; }

.side-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; }
.side-label { font-size: 10px; font-weight: 600; letter-spacing: .8px; text-transform: uppercase; color: var(--text-3); margin-bottom: 10px; }
.side-card-hdr { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.btn-ghost-sm { display: inline-flex; align-items: center; gap: 4px; font-size: 11px; color: var(--text-3); background: none; border: none; cursor: pointer; padding: 2px 4px; border-radius: 4px; transition: color var(--trans); font-family: inherit; }
.btn-ghost-sm:hover { color: var(--text-2); }

/* Progress Track */
.progress-track { display: flex; flex-direction: column; gap: 6px; }
.t-step { display: flex; align-items: center; gap: 9px; padding: 5px 6px; border-radius: var(--radius-sm); transition: background var(--trans); }
.t-dot { width: 20px; height: 20px; border-radius: 50%; border: 1.5px solid var(--border-2); display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all var(--trans); color: transparent; }
.t-step span { font-size: 12px; color: var(--text-3); transition: color var(--trans); }
.t-step.active .t-dot { border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 10px var(--accent-glow); }
.t-step.active > span { color: var(--text); font-weight: 500; }
.t-step.done .t-dot { background: var(--accent); border-color: var(--accent); color: white; }
.t-step.done > span { color: var(--text-2); }

/* Summary */
.sum-grid { display: flex; flex-direction: column; gap: 5px; }
.sum-r { display: flex; justify-content: space-between; align-items: baseline; gap: 6px; padding: 3px 0; border-bottom: 1px solid var(--border); }
.sum-r:last-child { border-bottom: none; }
.sum-k { font-size: 11px; color: var(--text-3); flex-shrink: 0; }
.sum-v { font-size: 11px; font-weight: 500; color: var(--text-2); text-align: right; word-break: break-all; max-width: 130px; }

/* History */
.history-list { display: flex; flex-direction: column; gap: 6px; max-height: 240px; overflow-y: auto; }
.history-empty { display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 16px 0; color: var(--text-3); font-size: 11px; }
.history-item { background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 9px 10px; transition: border-color var(--trans); }
.history-item:hover { border-color: var(--border-2); }
.history-item-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 4px; margin-bottom: 4px; }
.history-item-name { font-size: 11px; font-weight: 500; color: var(--text); line-height: 1.3; }
.history-item-time { font-size: 10px; color: var(--text-3); text-align: right; white-space: nowrap; }
.history-item-meta { display: flex; flex-wrap: wrap; gap: 3px; margin-bottom: 6px; }
.history-tag { font-size: 10px; background: var(--accent-dim); color: var(--accent-2); border-radius: 4px; padding: 1px 5px; }
.history-item-btns { display: flex; gap: 4px; }
.history-dl-btn { flex: 1; display: inline-flex; align-items: center; justify-content: center; gap: 4px; font-size: 10px; padding: 4px 6px; border-radius: 5px; border: 1px solid var(--border); background: var(--surface); color: var(--text-2); cursor: pointer; font-family: inherit; transition: all var(--trans); }
.history-dl-btn:hover { border-color: var(--accent); color: var(--accent); }
.history-dl-btn.key { color: var(--accent-2); border-color: var(--accent-dim); }

.side-credit { font-size: 10px; color: var(--text-3); text-align: center; margin-top: auto; padding-top: 8px; }

/* ── Main ── */
.main { flex: 1; padding: 20px 24px 60px; display: flex; flex-direction: column; gap: 14px; min-width: 0; }

/* Hint Bar */
.hint-bar { display: flex; align-items: center; gap: 7px; background: var(--accent-dim); border: 1px solid rgba(20,184,166,.2); border-radius: 8px; padding: 8px 12px; font-size: 12px; color: var(--accent-2); }

/* Form Steps */
.form-step {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px 22px;
  transition: opacity var(--trans), transform var(--trans), max-height .4s ease;
  animation: stepIn .3s ease both;
}
@keyframes stepIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
.form-step.collapsed {
  display: none;
}
.step-num { font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--accent); background: var(--accent-dim); border: 1px solid rgba(20,184,166,.2); display: inline-flex; padding: 2px 8px; border-radius: 20px; margin-bottom: 8px; }
.step-title { font-size: 16px; font-weight: 600; letter-spacing: -.3px; margin-bottom: 16px; }
.opt-badge { font-size: 10px; font-weight: 500; color: var(--text-3); background: var(--surface-2); border: 1px solid var(--border); border-radius: 20px; padding: 1px 7px; vertical-align: middle; margin-left: 6px; }

/* Type cards */
.type-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.type-card { display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: var(--surface-2); border: 1.5px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: all var(--trans); text-align: left; width: 100%; font-family: inherit; position: relative; overflow: hidden; }
.type-card::after { content: ''; position: absolute; inset: 0; background: var(--accent-dim); opacity: 0; transition: opacity var(--trans); }
.type-card:hover { border-color: var(--border-2); transform: translateY(-1px); }
.type-card.active { border-color: var(--accent); background: var(--accent-dim); box-shadow: 0 0 20px var(--accent-glow); }
.type-card.active::after { opacity: .15; }
.type-icon { font-size: 22px; flex-shrink: 0; }
.type-info { flex: 1; }
.type-name { font-size: 14px; font-weight: 600; color: var(--text); }
.type-sub { font-size: 11px; color: var(--text-3); margin-top: 1px; }
.type-check { width: 20px; height: 20px; border-radius: 50%; border: 1.5px solid var(--border-2); display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: transparent; transition: all var(--trans); }
.type-card.active .type-check { background: var(--accent); border-color: var(--accent); color: white; }

/* Field */
.field-group { display: flex; flex-direction: column; gap: 6px; }
.field-label { font-size: 12px; font-weight: 500; color: var(--text-2); }
.sel-wrap { position: relative; }
.field-select { width: 100%; padding: 9px 34px 9px 12px; background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); font-size: 13px; font-family: inherit; cursor: pointer; appearance: none; -webkit-appearance: none; transition: border-color var(--trans), box-shadow var(--trans); outline: none; }
.field-select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-dim); }
.sel-arr { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-3); }
.field-input { width: 100%; padding: 9px 12px; background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); font-size: 13px; font-family: inherit; outline: none; transition: border-color var(--trans), box-shadow var(--trans); }
.field-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-dim); }
.field-ta { width: 100%; padding: 10px 12px; background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); font-size: 13px; font-family: inherit; resize: vertical; outline: none; transition: border-color var(--trans), box-shadow var(--trans); }
.field-ta:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-dim); }

/* Comp info */
.comp-info { margin-top: 10px; background: var(--surface-2); border: 1px solid var(--accent-dim); border-radius: var(--radius-sm); padding: 10px 12px; font-size: 12px; color: var(--text-2); line-height: 1.6; animation: stepIn .25s ease both; }

/* Scope */
.scope-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.scope-3 { grid-template-columns: 1fr 1fr 1fr; }
.scope-card { display: flex; flex-direction: column; align-items: center; gap: 7px; padding: 16px 12px; background: var(--surface-2); border: 1.5px solid var(--border); border-radius: var(--radius); cursor: pointer; transition: all var(--trans); font-family: inherit; color: var(--text-2); text-align: center; }
.scope-card:hover { border-color: var(--border-2); color: var(--text); }
.scope-card.active { border-color: var(--accent); background: var(--accent-dim); color: var(--accent-2); box-shadow: 0 0 16px var(--accent-glow); }
.sc-name { font-size: 13px; font-weight: 600; color: var(--text); }
.sc-hint { font-size: 11px; color: var(--text-3); }
.scope-card.active .sc-name { color: var(--accent-2); }
.scope-card.active .sc-hint { color: var(--accent); opacity: .8; }

/* Details row */
.details-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

/* Step 5 */
.step5-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.chip-row { display: flex; gap: 6px; flex-wrap: wrap; }
.chip { padding: 6px 14px; background: var(--surface-2); border: 1px solid var(--border); border-radius: 20px; font-size: 13px; font-weight: 500; color: var(--text-2); cursor: pointer; font-family: inherit; transition: all var(--trans); }
.chip:hover { border-color: var(--border-2); color: var(--text); }
.chip.active { background: var(--accent-dim); border-color: var(--accent); color: var(--accent-2); }
.custom-wrap { display: flex; align-items: center; gap: 8px; margin-top: 8px; }
.unit-lbl { font-size: 12px; color: var(--text-3); }
.diff-row { display: flex; gap: 8px; }
.diff-btn { flex: 1; display: flex; align-items: center; justify-content: center; gap: 5px; padding: 8px 4px; background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); font-size: 13px; font-weight: 500; cursor: pointer; font-family: inherit; color: var(--text-2); transition: all var(--trans); }
.diff-btn:hover { border-color: var(--border-2); color: var(--text); }
.diff-btn.active.easy  { background: rgba( 74,222,128,.12); border-color: #4ade80; color: #4ade80; }
.diff-btn.active.medium{ background: rgba(251,191, 36,.12); border-color: #fbbf24; color: #fbbf24; }
.diff-btn.active.hard  { background: rgba(248, 66, 66,.12); border-color: #f84242; color: #f84242; }

/* Toggle */
.toggle-row { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 12px; background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius-sm); transition: border-color var(--trans); margin-top: 12px; }
.toggle-row:hover { border-color: var(--border-2); }
.tog-cb { display: none; }
.tog-wrap { flex-shrink: 0; }
.tog-track { width: 38px; height: 22px; background: var(--surface); border: 1.5px solid var(--border-2); border-radius: 11px; position: relative; transition: all var(--trans); cursor: pointer; }
.tog-knob { width: 14px; height: 14px; background: var(--text-3); border-radius: 50%; position: absolute; top: 2px; left: 2px; transition: all var(--trans); }
.tog-cb:checked + .tog-track { background: var(--accent); border-color: var(--accent); }
.tog-cb:checked + .tog-track .tog-knob { transform: translateX(16px); background: white; }
.tog-title { font-size: 13px; font-weight: 500; }
.tog-desc { font-size: 11px; color: var(--text-3); margin-top: 1px; }

/* Generate button */
.btn-gen {
  position: relative; overflow: hidden;
  display: flex; align-items: center; justify-content: center; gap: 9px;
  width: 100%; padding: 14px;
  background: var(--accent); border: none; border-radius: var(--radius);
  color: white; font-size: 15px; font-weight: 600; font-family: inherit;
  cursor: pointer; transition: all var(--trans); margin-top: 14px;
  letter-spacing: -.2px;
}
.btn-gen:hover { transform: translateY(-1px); box-shadow: 0 6px 24px var(--accent-glow); filter: brightness(1.08); }
.btn-gen:active { transform: translateY(0); }
.btn-glow { position: absolute; inset: 0; background: radial-gradient(ellipse at 50% -20%, rgba(255,255,255,.3), transparent 70%); pointer-events: none; }
.gen-note { font-size: 11px; color: var(--text-3); text-align: center; margin-top: 8px; }

/* Results */
.results-panel { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; animation: stepIn .35s ease both; }
.res-top { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 16px 18px; border-bottom: 1px solid var(--border); }
.res-title { display: flex; align-items: center; gap: 8px; font-size: 15px; font-weight: 600; }
.res-ok { width: 22px; height: 22px; background: rgba(74,222,128,.15); border: 1.5px solid #4ade80; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #4ade80; flex-shrink: 0; }
.res-btns { display: flex; gap: 6px; flex-wrap: wrap; }
.res-btn { display: inline-flex; align-items: center; gap: 5px; padding: 7px 13px; border-radius: var(--radius-sm); font-size: 12px; font-weight: 500; font-family: inherit; cursor: pointer; transition: all var(--trans); border: 1px solid var(--border); }
.res-primary { background: var(--accent); color: white; border-color: var(--accent); }
.res-primary:hover { filter: brightness(1.1); }
.res-key { background: rgba(251,191,36,.1); color: #fbbf24; border-color: rgba(251,191,36,.3); }
.res-key:hover { background: rgba(251,191,36,.18); }
.res-ghost { background: var(--surface-2); color: var(--text-2); }
.res-ghost:hover { color: var(--text); border-color: var(--border-2); }
.preview-tabs { display: flex; gap: 2px; padding: 8px 14px; border-bottom: 1px solid var(--border); }
.ptab { display: inline-flex; align-items: center; gap: 5px; padding: 6px 12px; border-radius: var(--radius-sm); font-size: 12px; font-weight: 500; font-family: inherit; cursor: pointer; border: none; background: transparent; color: var(--text-3); transition: all var(--trans); }
.ptab:hover { color: var(--text-2); background: var(--surface-2); }
.ptab.active { background: var(--accent-dim); color: var(--accent-2); }
.preview-ta { width: 100%; min-height: 420px; padding: 16px 18px; background: transparent; border: none; color: var(--text); font-family: 'DM Mono', monospace; font-size: 12.5px; line-height: 1.65; resize: vertical; outline: none; }
.preview-ta-key { color: var(--accent-2); }

/* ── Loader ── */
.loader-overlay { position: fixed; inset: 0; z-index: 200; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,.65); backdrop-filter: blur(12px); }
.loader-box { background: var(--surface-2); border: 1px solid var(--border-2); border-radius: 20px; padding: 36px 44px; display: flex; flex-direction: column; align-items: center; gap: 20px; min-width: 300px; box-shadow: 0 24px 80px rgba(0,0,0,.5); animation: stepIn .3s ease both; }
.loader-rings { position: relative; width: 80px; height: 80px; }
.ring-svg { width: 80px; height: 80px; }
.ring-track { stroke: var(--border-2); }
.ring-arc { stroke: var(--accent); stroke-linecap: round; stroke-dasharray: 200 1000; transform-origin: 40px 40px; }
.arc1 { animation: spin1 2s linear infinite; }
.arc2 { animation: spin1 1.5s linear infinite reverse; stroke: var(--accent-2); }
.arc3 { animation: spin1 1s linear infinite; stroke: var(--accent-3); }
@keyframes spin1 { 100%{transform:rotate(360deg)} }
.loader-icon { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; color: var(--accent); }
.loader-title { font-size: 16px; font-weight: 600; letter-spacing: -.3px; }
.loader-steps { display: flex; flex-direction: column; gap: 8px; width: 100%; }
.l-step { display: flex; align-items: center; gap: 10px; font-size: 13px; color: var(--text-3); transition: color var(--trans); }
.l-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--border-2); transition: all var(--trans); flex-shrink: 0; }
.l-step.active { color: var(--text); }
.l-step.active .l-dot { background: var(--accent); box-shadow: 0 0 8px var(--accent-glow); animation: blink .8s ease-in-out infinite; }
.l-step.done { color: var(--text-2); }
.l-step.done .l-dot { background: #4ade80; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.4} }

/* ── Toast ── */
.toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(16px); background: var(--surface-2); border: 1px solid var(--border-2); border-radius: 8px; padding: 10px 18px; font-size: 13px; font-weight: 500; box-shadow: 0 8px 32px rgba(0,0,0,.3); opacity: 0; pointer-events: none; z-index: 300; transition: opacity .25s ease, transform .25s ease; white-space: nowrap; }
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* ── Responsive ── */
@media (max-width: 1100px) {
  .nav-pills { display: none; }
}
@media (max-width: 900px) {
  .shell { flex-direction: column; }
  .sidebar { width: 100%; position: static; height: auto; flex-direction: row; flex-wrap: wrap; padding: 12px 16px; }
  .side-hero { flex: 1; min-width: 200px; }
  .side-card { flex: 1; min-width: 200px; }
}
@media (max-width: 640px) {
  .type-grid, .scope-grid, .scope-3, .details-row, .step5-row { grid-template-columns: 1fr; }
  .main { padding: 12px 14px 40px; }
}
