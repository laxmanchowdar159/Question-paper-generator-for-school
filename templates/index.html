<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ExamCraft â€” AI Exam Paper Generator</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<div class="aurora" aria-hidden="true">
  <div class="aurora-orb orb-1"></div>
  <div class="aurora-orb orb-2"></div>
  <div class="aurora-orb orb-3"></div>
  <div class="aurora-orb orb-4"></div>
  <div class="noise-overlay"></div>
</div>

<nav class="topnav">
  <div class="nav-brand">
    <div class="nav-logo">
      <svg width="18" height="18" viewBox="0 0 32 32" fill="none">
        <polygon points="16,2 30,9 30,23 16,30 2,23 2,9" stroke="currentColor" stroke-width="2" fill="none"/>
        <polygon points="16,8 24,12 24,20 16,24 8,20 8,12" stroke="currentColor" stroke-width="1.5" fill="none" opacity=".5"/>
        <circle cx="16" cy="16" r="3" fill="currentColor"/>
      </svg>
    </div>
    <span class="nav-name">ExamCraft</span>
    <span class="nav-badge">AI</span>
  </div>
  <div class="nav-center">
    <span class="nav-pill">ğŸ›ï¸ 7 Boards</span>
    <span class="nav-pill">ğŸ† Olympiads</span>
    <span class="nav-pill">ğŸ“„ PDF Export</span>
  </div>
  <div class="nav-right">
    <button class="theme-toggle" id="themeBtn" onclick="toggleTheme()" title="Toggle theme">
      <svg class="icon-sun" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
      <svg class="icon-moon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
    </button>
  </div>
</nav>

<div class="app-shell">

  <!-- â•â•â•â• LEFT COLUMN â•â•â•â• -->
  <aside class="left-col">

    <div class="hero-card glass-card">
      <div class="hero-eyebrow"><span class="pulse-dot"></span>Gemini AI Â· Live</div>
      <h1 class="hero-title">Craft Perfect<br><em>Exam Papers</em></h1>
      <p class="hero-sub">Board-aligned, syllabus-accurate question papers in under 30 seconds.</p>
    </div>

    <!-- Live Config -->
    <div class="config-card glass-card">
      <div class="config-label">Current Paper</div>
      <div class="config-grid">
        <div class="cfg-row"><span class="cfg-k">Board</span><span class="cfg-v" id="sb-board">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Class</span><span class="cfg-v" id="sb-class">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Subject</span><span class="cfg-v" id="sb-subject">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Chapter</span><span class="cfg-v" id="sb-chapter">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Scope</span><span class="cfg-v" id="sb-scope">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Marks</span><span class="cfg-v" id="sb-marks">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Level</span><span class="cfg-v" id="sb-difficulty">â€”</span></div>
        <div class="cfg-row"><span class="cfg-k">Answer Key</span><span class="cfg-v" id="sb-key">No</span></div>
      </div>
    </div>

    <!-- History Panel -->
    <div class="history-card glass-card">
      <div class="history-header">
        <div class="config-label" style="margin-bottom:0">Recent Papers</div>
        <button class="clear-history-btn" onclick="clearHistory()" title="Clear history">
          <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/><path d="M10 11v6M14 11v6"/><path d="M9 6V4h6v2"/></svg>
        </button>
      </div>
      <div id="historyList" class="history-list">
        <div class="history-empty">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity=".3"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
          <span>No papers yet</span>
        </div>
      </div>
    </div>

    <div class="left-credit">by Laxman Nimmagadda Â· Â© 2026</div>
  </aside>

  <!-- â•â•â•â• RIGHT COLUMN â•â•â•â• -->
  <main class="right-col">

    <div class="hint-bar" id="fieldHint">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
      <span id="hintText">Begin by selecting a paper type below.</span>
    </div>

    <!-- STEP 1 â€” Paper Type -->
    <div class="form-card glass-card">
      <div class="card-step">01</div>
      <div class="card-title">Paper Type</div>
      <div class="type-grid">
        <button class="type-tile" id="tile-state" onclick="selectType('state-board')">
          <div class="tile-icon">ğŸ›ï¸</div>
          <div class="tile-name">State Board</div>
          <div class="tile-sub">AP Â· TS Â· MH Â· KA Â· TN Â· KL Â· UP</div>
          <div class="tile-check"><svg width="10" height="10" viewBox="0 0 12 12"><polyline points="2,6 5,9 10,3" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg></div>
        </button>
        <button class="type-tile" id="tile-comp" onclick="selectType('competitive')">
          <div class="tile-icon">ğŸ†</div>
          <div class="tile-name">Competitive</div>
          <div class="tile-sub">NTSE Â· KVPY Â· IMO Â· NSO Â· IJSO</div>
          <div class="tile-check"><svg width="10" height="10" viewBox="0 0 12 12"><polyline points="2,6 5,9 10,3" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg></div>
        </button>
      </div>
      <select id="examType" name="examType" style="display:none">
        <option value="">Select paper type</option>
        <option value="state-board">State Board</option>
        <option value="competitive">Competitive Exam</option>
      </select>
    </div>

    <!-- STEP 2a â€” State -->
    <div class="form-card glass-card collapsed" id="stateCard">
      <div class="card-step">02</div>
      <div class="card-title">Select State</div>
      <div class="field-wrap">
        <label class="field-label">State Board</label>
        <div class="select-shell">
          <select id="stateSelect" name="state" class="glass-select">
            <option value="">Choose your stateâ€¦</option>
            <option value="Andhra Pradesh">Andhra Pradesh (BSEAP)</option>
            <option value="Telangana">Telangana (BSETS)</option>
            <option value="Maharashtra">Maharashtra (SSC)</option>
            <option value="Karnataka">Karnataka (KSEEB)</option>
            <option value="Tamil Nadu">Tamil Nadu (TN Board)</option>
            <option value="Kerala">Kerala (SCERT)</option>
            <option value="Uttar Pradesh">Uttar Pradesh (UPMSP)</option>
          </select>
          <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
        </div>
      </div>
    </div>

    <!-- STEP 2b â€” Competitive -->
    <div class="form-card glass-card collapsed" id="competitiveCard">
      <div class="card-step">02</div>
      <div class="card-title">Competitive Exam</div>
      <div class="field-wrap">
        <label class="field-label">Examination</label>
        <div class="select-shell">
          <select id="competitiveExam" name="competitiveExam" class="glass-select">
            <option value="">Choose examâ€¦</option>
            <option value="NTSE">NTSE â€” National Talent Search</option>
            <option value="KVPY">KVPY â€” Kishore Vaigyanik</option>
            <option value="NSO">NSO â€” National Science Olympiad</option>
            <option value="IMO">IMO â€” Maths Olympiad</option>
            <option value="IJSO">IJSO â€” Junior Science Olympiad</option>
          </select>
          <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
        </div>
      </div>
    </div>

    <!-- STEP 3 â€” Scope -->
    <div class="form-card glass-card collapsed" id="scopeCard">
      <div class="card-step">03</div>
      <div class="card-title">Paper Scope</div>
      <div class="scope-row">
        <button class="scope-btn active" id="scope-single" onclick="selectScope('single')">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
          Single Chapter
          <span class="scope-hint">Focused paper</span>
        </button>
        <button class="scope-btn" id="scope-all" onclick="selectScope('all')">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
          Full Syllabus
          <span class="scope-hint">All chapters</span>
        </button>
      </div>
      <select id="scopeSelect" name="scope" style="display:none">
        <option value="single">Single Chapter</option>
        <option value="all">Full Syllabus</option>
      </select>
    </div>

    <!-- STEP 4 â€” Details -->
    <div class="form-card glass-card">
      <div class="card-step">04</div>
      <div class="card-title">Paper Details</div>
      <div class="three-col">
        <div class="field-wrap">
          <label class="field-label" for="class">Class / Grade</label>
          <div class="select-shell">
            <select id="class" name="class" required class="glass-select">
              <option value="">Select classâ€¦</option>
              <option value="10">Class 10 (X)</option>
              <option value="9">Class 9 (IX)</option>
              <option value="8">Class 8 (VIII)</option>
              <option value="7">Class 7 (VII)</option>
              <option value="6">Class 6 (VI)</option>
            </select>
            <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
        <div class="field-wrap" id="subjectCard">
          <label class="field-label" for="subject">Subject</label>
          <div class="select-shell">
            <select id="subject" name="subject" class="glass-select">
              <option value="">Select subjectâ€¦</option>
            </select>
            <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
        <div class="field-wrap" id="chapterCard">
          <label class="field-label" for="chapter">Chapter</label>
          <div class="select-shell">
            <select id="chapter" name="chapter" class="glass-select">
              <option value="">Select chapterâ€¦</option>
            </select>
            <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 5 â€” Marks & Difficulty -->
    <div class="form-card glass-card">
      <div class="card-step">05</div>
      <div class="card-title">Marks &amp; Difficulty</div>
      <div class="two-col">
        <div class="field-wrap" id="marksCard">
          <label class="field-label">Total Marks <span class="marks-auto-hint" id="marksAutoHint" style="font-size:10px;color:var(--accent-2);font-family:var(--font-mono);margin-left:6px;opacity:.8;"></span></label>
          <div class="chip-row" id="markChips">
            <button type="button" class="chip" data-val="20" onclick="selectMark(this)">20</button>
            <button type="button" class="chip active" data-val="80" onclick="selectMark(this)">80</button>
            <button type="button" class="chip" data-val="100" onclick="selectMark(this)">100</button>
            <button type="button" class="chip chip-custom" id="chipCustom" onclick="toggleCustomMark(this)">Custom</button>
          </div>
          <div id="customMarkWrap" class="custom-mark-wrap" style="display:none;">
            <input type="number" id="customMarkInput" class="custom-mark-input glass-select"
              placeholder="Enter marksâ€¦" min="1" max="500"
              oninput="applyCustomMark(this.value)">
            <span class="custom-mark-unit">marks</span>
          </div>
          <select id="totalMarks" name="marks" style="display:none">
            <option value="80">80</option><option value="20">20</option>
            <option value="100">100</option>
          </select>
        </div>
        <div class="field-wrap" id="difficultyCard">
          <label class="field-label">Difficulty Level</label>
          <div class="diff-row">
            <button type="button" class="diff-btn easy" id="diff-easy" onclick="selectDiff('Easy', this)"><span>ğŸŒ±</span> Easy</button>
            <button type="button" class="diff-btn medium active" id="diff-med" onclick="selectDiff('Medium', this)"><span>âš¡</span> Medium</button>
            <button type="button" class="diff-btn hard" id="diff-hard" onclick="selectDiff('Hard', this)"><span>ğŸ”¥</span> Hard</button>
          </div>
          <div style="display:none">
            <input type="radio" name="difficulty" value="Easy" id="r-easy">
            <input type="radio" name="difficulty" value="Medium" id="r-med" checked>
            <input type="radio" name="difficulty" value="Hard" id="r-hard">
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 6 â€” Instructions -->
    <form id="paperForm" novalidate>
      <div class="form-card glass-card">
        <div class="card-step">06</div>
        <div class="card-title">Custom Instructions <span class="opt-tag">optional</span></div>
        <textarea id="suggestions" name="suggestions" rows="3" class="glass-ta"
          placeholder="e.g. Include 2 labelled diagrams Â· Follow AP Board 2024 pattern Â· Step-by-step solutions for all long answers"></textarea>
        <label class="toggle-row" for="includeKey">
          <div class="toggle-wrap">
            <input type="checkbox" id="includeKey" name="includeKey" class="toggle-cb">
            <div class="toggle-track"><div class="toggle-knob"></div></div>
          </div>
          <div>
            <div class="toggle-title">Include Answer Key in PDF</div>
            <div class="toggle-desc">Appends a full answer key as the final page</div>
          </div>
        </label>
      </div>
      <button type="submit" class="cta-btn" id="generateBtn">
        <span class="cta-glow"></span>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        Generate Paper
      </button>
      <p class="cta-note">Gemini AI Â· ~15â€“30 seconds Â· No account needed</p>
    </form>

    <!-- Results Panel -->
    <div id="resultsPanel" class="results-card glass-card" style="display:none">
      <div class="results-header">
        <div class="results-title">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
          Paper Ready
        </div>
        <div class="results-btns">
          <button class="res-btn primary" id="dlPaperBtn" onclick="downloadPDF(false)">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Download PDF
          </button>
          <button class="res-btn gold" id="dlKeyBtn" onclick="downloadPDF(true)">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
            PDF + Answer Key
          </button>
          <button class="res-btn ghost" onclick="copyPaper()">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            Copy Text
          </button>
        </div>
      </div>
      <div class="preview-tabs">
        <button class="p-tab active" id="ptab-paper" onclick="switchPreviewTab('paper', this)">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          Question Paper
        </button>
        <button class="p-tab" id="ptab-key" onclick="switchPreviewTab('key', this)" style="display:none">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
          Answer Key
        </button>
      </div>
      <div id="tab-paper">
        <textarea id="paperOutput" readonly class="preview-ta" placeholder="Your generated paper will appear hereâ€¦"></textarea>
      </div>
      <div id="tab-key" style="display:none">
        <textarea id="answerKeyOutput" readonly class="preview-ta preview-ta--key" placeholder="Answer key will appear hereâ€¦"></textarea>
      </div>
    </div>

  </main>
</div>

<!-- Loading Overlay -->
<div id="loadingModal" class="loader-overlay" style="display:none">
  <div class="loader-glass">
    <div class="loader-ring">
      <svg class="ring-svg" viewBox="0 0 80 80">
        <circle class="ring-track" cx="40" cy="40" r="32" fill="none" stroke-width="3"/>
        <circle class="ring-arc arc1" cx="40" cy="40" r="32" fill="none" stroke-width="3"/>
        <circle class="ring-arc arc2" cx="40" cy="40" r="22" fill="none" stroke-width="2"/>
        <circle class="ring-arc arc3" cx="40" cy="40" r="12" fill="none" stroke-width="2"/>
      </svg>
      <div class="ring-icon">
        <svg width="20" height="20" viewBox="0 0 32 32" fill="none"><polygon points="16,2 30,9 30,23 16,30 2,23 2,9" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="16" cy="16" r="4" fill="currentColor"/></svg>
      </div>
    </div>
    <h3 class="loader-title" id="loaderTitle">Crafting your paperâ€¦</h3>
    <div class="loader-steps">
      <div class="l-step" id="ls1"><div class="l-dot"></div><span>Analysing syllabus</span></div>
      <div class="l-step" id="ls2"><div class="l-dot"></div><span>Writing questions</span></div>
      <div class="l-step" id="ls3"><div class="l-dot"></div><span>Building answer key</span></div>
      <div class="l-step" id="ls4"><div class="l-dot"></div><span>Rendering PDF</span></div>
    </div>
  </div>
</div>

<div id="notificationToast" class="toast-msg"></div>

<script src="/static/js/app.js"></script>
</body>
</html>